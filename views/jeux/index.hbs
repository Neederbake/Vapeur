<div class="container">
    <div class="page-header">
        <h1>Liste des Jeux</h1>
        <a href="/jeux/new" class="btn btn-primary">Ajouter un jeu</a>
    </div>

    <div class="cards">
        {{!-- Boucle sur tous les jeux passés par le contrôleur --}}
        {{#each games}}
            {{!-- Ajoute la classe 'card-featured' si la propriété 'featured' est vraie --}}
            <div class="card {{#if this.featured}}card-featured{{/if}}">
                <a href="/jeux/{{this.id}}" class="card-link" aria-label="Voir les détails de {{this.titre}}"></a>
                <div class="card-header flex-row-center relative-z2">
                    <h2 class="name flex-1 mb-0">{{this.titre}}</h2>
                    {{#if this.featured}}
                        <span class="badge badge-gold">Featured</span>
                        <a href="/jeux/{{this.id}}/unfeature" class="btn btn-secondary" style="padding: 0.2rem 0.5rem; font-size: 0.7rem; margin-left: 0.5rem;">Retirer</a>
                    {{else}}
                        <a href="/jeux/{{this.id}}/feature" class="btn btn-primary" style="padding: 0.2rem 0.5rem; font-size: 0.7rem;">Mettre en avant</a>
                    {{/if}}
                </div>
                
                <div class="meta relative-z2" style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem;">
                    {{#if this.genres}}
                        <a href="/genres/{{this.genres.id}}" class="clickable-badge">Genre : {{this.genres.nom}}</a>
                    {{else}}
                        <span class="clickable-badge">Genre non renseigné</span>
                    {{/if}}

                    {{#if this.editeur}}
                        <a href="/editeurs/{{this.editeur.id}}" class="clickable-badge">Éditeur : {{this.editeur.nom}}</a>
                    {{else}}
                        <span class="clickable-badge">Éditeur non renseigné</span>
                    {{/if}}
                </div>

                <p class="flex-1">{{this.description}}</p>
            </div>
        {{else}}
            {{!-- Ce bloc s'affiche si la liste 'games' est vide --}}
            <div class="empty-state">
                <p>Aucun jeu trouvé.</p>
            </div>
        {{/each}}
    </div>
</div>
